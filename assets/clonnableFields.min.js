function handleDividers(b,a){a||(jQuery(".field-rows .cloned-row .cloned-row-dividers",b).css("display",""),jQuery(".field-rows .cloned-row .cloned-row-dividers",b).last().css("display","none"))}
function regenerateFieldsName(b,a){jQuery("input, textarea, checkbox, radio, select",a).each(function(){if(0<jQuery(this).length&&"undefined"!==typeof jQuery(this).attr("data-groupname")&&"undefined"!==typeof jQuery(this).attr("data-attribute")){var a=jQuery(this).attr("data-groupname"),l=jQuery(this).attr("data-attribute");jQuery(this).attr("name",a+"["+b+"]["+l+"]");if("undefined"!==typeof jQuery(this).attr("data-widgetname")){var h=jQuery(this).attr("data-widgetname");jQuery(this).attr("id",h+
"_"+a+"_"+b+"__"+l)}}})}function regenerateAllFieldsNames(b){var a=0;jQuery(".field-rows .cloned-row",b).each(function(b,l){a++;regenerateFieldsName(a,jQuery(this))})}
function initSortable(b,a,k){jQuery(".field-rows",b).sortable({items:"div.cloned-row",cursor:"move",axis:"y",opacity:0.7,forceHelperSize:!0,forcePlaceholderSize:!0,tolerance:"pointer",zIndex:9999,delay:150,distance:5,start:function(b,a){jQuery(".cloned-row-dividers",a.item).css("display","")},stop:function(l,h){handleDividers(b,a)},update:function(a,h){var m=jQuery("div.hidden-template",b);k(b,m,jQuery(this),0);regenerateAllFieldsNames(b)}})}
function removeRowAction(b,a,k,l,h,m,q,n,p){var d=b.parents(".cloned-row"),c=b.parents(".clonnable-fields-widget"),g=jQuery("div.hidden-template",c),e=jQuery(".field-rows .cloned-row",c).length;e-1<k?jQuery("a.remove-cloned-row",c).css("display","none"):(e--,m(c,g,d,e),n&&0>=e&&jQuery("div.field-labels",c).css("display","none"),jQuery('a[data-toggle="tooltip"]',d).tooltip("destroy"),d.slideUp(300,function(){d.remove();handleDividers(c,p);q(c,g,d,e);regenerateAllFieldsNames(c)}),jQuery("a.clone-row",
c).css("display",""),e<=k&&jQuery("a.remove-cloned-row",c).css("display","none"))}
function addRowAction(b,a,k,l,h,m,q,n,p){var d=b.parent(),c=jQuery(".field-rows .cloned-row",d).length;if(!(0!==a&&c>=a)){var g=jQuery(".field-rows",d),e=jQuery("div.hidden-template",d);c++;var f=e.clone();f.removeClass("hidden-template");f.addClass("cloned-row");c<=k?jQuery("a.remove-cloned-row",d).css("display","none"):jQuery("a.remove-cloned-row",d).css("display","");jQuery("a.remove-cloned-row",f).click(function(){removeRowAction(jQuery(this),a,k,l,h,m,q,n,p);return!1});regenerateFieldsName(c,
f);0!==a&&c>=a&&b.css("display","none");n&&jQuery("div.field-labels",d).css("display","");l(d,e,f,c);jQuery('a[data-toggle="tooltip"]',f).tooltip();f.appendTo(g);handleDividers(d,p);f.slideDown(300);h(d,e,f,c)}}
function initClonnableFields(b,a,k,l,h,m,q,n,p,d,c){var g=jQuery("div#"+b),e=jQuery("div.hidden-template",g);jQuery("a.clone-row",g).click(function(){addRowAction(jQuery(this),a,k,h,m,q,n,p,d);return!1});jQuery("a.remove-cloned-row",g).click(function(){removeRowAction(jQuery(this),a,k,h,m,q,n,p,d);return!1});var f=0;jQuery(".field-rows .cloned-row",g).each(function(a,b){f++;h(g,e,jQuery(this),f);m(g,e,jQuery(this),f)});c&&initSortable(g,d,l)};
